import{r as L,j as i,L as K}from"./index-CfV56Ibu.js";const o=function(f,c,s){this.x=f,this.y=c,this.z=s};class k{constructor(c,s,u,r){this.w=c,this.x=s,this.y=u,this.z=r}static edges=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]];get vertices(){return[new o(this.x-this.w,this.y-this.w,this.z-this.w),new o(this.x+this.w,this.y-this.w,this.z-this.w),new o(this.x+this.w,this.y+this.w,this.z-this.w),new o(this.x-this.w,this.y+this.w,this.z-this.w),new o(this.x-this.w,this.y-this.w,this.z+this.w),new o(this.x+this.w,this.y-this.w,this.z+this.w),new o(this.x+this.w,this.y+this.w,this.z+this.w),new o(this.x-this.w,this.y+this.w,this.z+this.w)]}}const l=450,d=750;function W(){const f=L.useRef(null);return L.useEffect(()=>{const c=f.current;if(!c)return;const s=c.getContext("2d");c.width=d,c.height=l,s.fillStyle="grey",s.strokeStyle="black",s.lineWidth=3,s.lineCap="round";const u=[];for(let e=0;e<4;e++){const n=new k(25,d/3,0,l+e*100),h=new k(25,2*d/3,0,l+e*100);u.push(n.vertices),u.push(h.vertices)}const r=new o(375,0,225),t={forward:!1,backward:!1,left:!1,right:!1,up:!1,down:!1};let a=0;const M=()=>{t.forward&&(r.x+=Math.sin(a)*3,r.z+=Math.cos(a)*3),t.backward&&(r.x-=Math.sin(a)*3,r.z-=Math.cos(a)*3),t.left?a-=.03:t.right&&(a+=.03),t.up?r.y-=3:t.down&&(r.y+=3)},N=(e,n,h,w,R,C)=>{const z=d/2,A=l/2,j=e-r.x,H=n-r.y,E=h-r.z,S=w-r.x,X=R-r.y,T=C-r.z,F=j*Math.cos(-a)+E*Math.sin(-a),m=E*Math.cos(-a)-j*Math.sin(-a),I=S*Math.cos(-a)+T*Math.sin(-a),y=T*Math.cos(-a)-S*Math.sin(-a);if(m<=0||y<=0)return;const p=400,P=F/m*p+z,U=H/m*p+A,Y=I/y*p+z,q=X/y*p+A;s.beginPath(),s.moveTo(P,U),s.lineTo(Y,q),s.stroke()};let x=null;const b=()=>{s.clearRect(0,0,d,l),s.fillRect(0,0,d,l),M();for(const e of u)for(const n of k.edges){const h=e[n[0]],w=e[n[1]];N(h.x,h.y,h.z,w.x,w.y,w.z)}x=requestAnimationFrame(b)},g=e=>{const n=e.target;return n===document.body||n===c||n instanceof HTMLElement&&!["INPUT","TEXTAREA","SELECT"].includes(n.tagName)},D=e=>{if(g(e))switch(e.code){case"ShiftLeft":case"ShiftRight":e.preventDefault(),t.down=!0;break;case"Space":e.preventDefault(),t.up=!0;break;case"ArrowLeft":e.preventDefault(),t.left=!0;break;case"ArrowRight":e.preventDefault(),t.right=!0;break;case"ArrowUp":e.preventDefault(),t.forward=!0;break;case"ArrowDown":e.preventDefault(),t.backward=!0;break}},v=e=>{if(g(e))switch(e.code){case"ShiftLeft":case"ShiftRight":e.preventDefault(),t.down=!1;break;case"Space":e.preventDefault(),t.up=!1;break;case"ArrowLeft":e.preventDefault(),t.left=!1;break;case"ArrowRight":e.preventDefault(),t.right=!1;break;case"ArrowUp":e.preventDefault(),t.forward=!1;break;case"ArrowDown":e.preventDefault(),t.backward=!1;break}};return x=requestAnimationFrame(b),document.addEventListener("keydown",D),document.addEventListener("keyup",v),()=>{cancelAnimationFrame(x),document.removeEventListener("keydown",D),document.removeEventListener("keyup",v)}},[]),i.jsx("div",{className:"min-h-screen bg-white dark:bg-black text-neutral-900 dark:text-neutral-100",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-16 md:py-24 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm uppercase tracking-wide text-neutral-500 dark:text-neutral-400 mb-2",children:"Experiment"}),i.jsx("h1",{className:"text-2xl font-semibold",children:"3D Camera Test"})]}),i.jsx(K,{to:"/experiments",className:"text-sm text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-neutral-100 underline underline-offset-4",children:"‚Üê Experiments"})]}),i.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 leading-relaxed",children:"Arrow keys move forward/backward, space/shift fly, and the left/right arrows pivot the camera yaw. The scene renders cubes with a minimal custom projection pipeline on the HTML canvas."}),i.jsx("div",{className:"flex justify-center",children:i.jsx("canvas",{ref:f,className:"w-full max-w-[750px] border border-neutral-200 dark:border-neutral-800 rounded-2xl bg-neutral-300 dark:bg-neutral-900"})})]})})}export{W as default};
